let A=a=>a==void 0;document.addEventListener('DOMContentLoaded',function(){var _=0.8,b=0.8,c=window.fitToScreen!==void 0&&window.fitToScreen,E=document.getElementsByClassName('thumbnail-viewer'),F=document.getElementsByClassName('directory-viewer'),g=document.getElementsByClassName('file-viewer'),v=null;window.show_filenames==void 0&&(window.show_filenames=!0);window.show_folders==void 0&&(window.show_folders=!0);var B=1.0;function h(C,_b){var _c=document.createElement('div'),_e=window.truncate_names!==void 0&&window.truncate_names;_c.className='thumbnail-viewer-label';_c.innerHTML=_c.title=_b;_c.style.display=window.show_filenames?'':'none';var D=window.name_under_thumbs!==void 0?window.name_under_thumbs:!0;if(D){_c.style.textAlign='center';_c.style.fontSize='12px';_c.style.marginTop='5px';_c.style.wordBreak='break-all';_c.style.color='inherit';_c.style.width='100%';_c.style.boxSizing='border-box';_c.style.padding='0 5px';_c.style.left='0';_e?(_c.style.overflow='hidden',_c.style.textOverflow='ellipsis',_c.style.whiteSpace='nowrap',_c.style.display='block',_c.style.maxWidth='100px',_c.style.margin='5px auto 0 auto'):(_c.style.display='block')}else{_c.style.position='absolute';_c.style.bottom=_c.style.left=_c.style.right='5px';_c.style.textAlign='center';_c.style.fontSize='12px';_c.style.wordBreak='break-all';_c.style.color='#fff';_c.style.backgroundColor='rgba(0, 0, 0, 0.5)';_c.style.padding='2px';_c.style.boxSizing='border-box';_c.style.pointerEvents='none';_e&&(_c.style.overflow='hidden',_c.style.textOverflow='ellipsis',_c.style.whiteSpace='nowrap');C.style.position='relative'}C.style.display='inline-block';C.style.verticalAlign='top';C.style.textDecoration='none';C.appendChild(_c)}for(var i=0;i<E.length;i++){var e=E[i],K='',l=e.getElementsByTagName('img');if(l.length>0&&l[0].alt)K=l[0].alt;else{var m=e.getAttribute('href');if(m){var n=m.endsWith('/')?m.slice(0,-1):m;K=decodeURIComponent(n.substring(n.lastIndexOf('/')+1))}}K&&h(e,K);(function(_a,_B){_a.addEventListener('click',function(_A){_A.preventDefault();x(_B)})})(e,i)}for(var j=0;j<F.length;j++){var d=F[j],q=d.getAttribute('data-name');q&&h(d,q);d.style.setProperty('display',window.show_folders?'inline-block':'none','important')}for(var k=0;k<g.length;k++){var f=g[k],t=f.getAttribute('data-name');t&&h(f,t)}var u=[];if(E===null||A(E))return;if(E.length===0){var w=document.createElement('div');w.innerHTML='No images found';w.style.textAlign='center';w.style.marginTop='100px';w.style.fontFamily='Helvetica, Arial, sans-serif';w.style.color='#888';w.style.fontSize='24px';document.body.insertBefore(w,document.body.firstChild);return}function x(aK){var aL=E[aK],_C=aL.href,_d,G=z(),H=aA(_C,_d),I=aB(_C,_d),J=aC(),_k=aD(aK),L=aE(aK);var _E=aL.getElementsByTagName('img');_E.length>0&&(_d=_E[0].alt);var _f=y();function M(){c=window.fitToScreen!==void 0&&window.fitToScreen;aG(_f,G,H,I,J,_k,L)}window.thumbnailViewerReStyle=M;aF(_f,G,H,I,J,_k,L);aI(_f);document.body.appendChild(_f);aH();u.push(_f);M();H.addEventListener('load',M);v=M;window.addEventListener('resize',M);aJ(_f);function N(aM){if(aM.code==='PageUp'||aM.code==='ArrowLeft'){aM.preventDefault();aK>0&&x(aK-1)}else if(aM.code==='PageDown'||aM.code==='ArrowRight'){aM.preventDefault();aK<E.length-1&&x(aK+1)}else aM.code==='Escape'&&(aM.preventDefault(),aH())}function o(aN){if(aN.ctrlKey)return;aN.preventDefault();if(aN.deltaY<0)aK>0&&x(aK-1);else if(aN.deltaY>0)aK<E.length-1&&x(aK+1)}window.addEventListener('keydown',N);window.addEventListener('wheel',o,{passive:!1});_f._cleanupNav=()=>{window.removeEventListener('keydown',N);window.removeEventListener('wheel',o)}}document.addEventListener('contextmenu',function(aO){var aP=aO.target.closest('[data-name]');if(aP){aO.preventDefault();var aQ=aP.getAttribute('data-name'),_D=window.basePath||'';(_D&&!_D.endsWith('\\')&&!_D.endsWith('/'))&&(_D+=_D.includes('\\')?'\\':'/');var aR=_D+aQ;(window.chrome?.webview&&typeof window.chrome.webview.postMessage==='function')&&window.chrome.webview.postMessage(`CMD_MENU|${aR}`)}});document.addEventListener('keydown',function(aS){if(aS.code==='KeyF'){window.fitToScreen=!window.fitToScreen;var aT=document.getElementById('fit-to-screen-toggle');aT&&(aT.checked=window.fitToScreen);(u.length>0&&typeof window.thumbnailViewerReStyle==='function')&&window.thumbnailViewerReStyle()}if(aS.ctrlKey&&aS.code==='KeyH'){aS.preventDefault();window.show_filenames=!window.show_filenames;var aU=document.getElementsByClassName('thumbnail-viewer-label');for(var i=0;i<aU.length;i++)aU[i].style.display=window.show_filenames?'':'none';(u.length>0&&typeof window.thumbnailViewerReStyle==='function')&&window.thumbnailViewerReStyle()}if(aS.ctrlKey&&aS.code==='KeyG'){aS.preventDefault();window.show_folders=!window.show_folders;var aV=document.getElementsByClassName('directory-viewer');for(var i=0;i<aV.length;i++)aV[i].style.setProperty('display',window.show_folders?'inline-block':'none','important')}});function y(){let e=document.createElement('div');e.className='thumbnail-viewer-overall';e.addEventListener('click',function(aW){aW.target.className==='thumbnail-viewer-overall'&&aH()});return e}function z(){let e=document.createElement('figure');e.className='thumbnail-viewer-container';return e}function aA(aX,aY){let e=document.createElement('img');e.className='thumbnail-viewer-image';e.src=aX;(aY!==null&&!A(aY))&&(e.alt=aY);return e}function aB(aZ,bA){let e=document.createElement('figcaption');e.className='thumbnail-viewer-caption';e.style.display=window.show_filenames?'':'none';if(bA)e.innerHTML=bA;else{e.innerHTML=decodeURIComponent(aZ.substring(aZ.lastIndexOf('/')+1))}return e}function aC(){let e=document.createElement('a');e.className='thumbnail-viewer-close';e.alt='Close image';e.href='#';e.innerHTML='Close';e.addEventListener('click',function(bB){bB.preventDefault();aH()});return e}function aD(bC){if(bC>0){const e=document.createElement('a');e.className='thumbnail-viewer-prev';e.href='#';e.innerHTML='Previous';e.addEventListener('click',function(bD){bD.preventDefault();x(bC-1)});return e}return null}function aE(bE){if(bE<E.length-1){const e=document.createElement('a');e.className='thumbnail-viewer-next';e.href='#';e.innerHTML='Next';e.addEventListener('click',function(bF){bF.preventDefault();x(bE+1)});return e}return null}function aF(bG,bH,bI,bJ,bK,_F,_g){bG.appendChild(bH);bH.appendChild(bI);bH.appendChild(bJ);bH.appendChild(bK);_F&&bG.appendChild(_F);_g&&bG.appendChild(_g)}function aG(bL,bM,bN,bO,bP,bQ,_G){var _h=window.innerWidth,_i=window.innerHeight,_j=window.devicePixelRatio||1,_K=1/_j,_m='';!isNaN(_i)&&(bL.style.height=`${_i}px`);bL.style.position='fixed';bL.style.margin=bL.style.top=bL.style.left=0;bL.style.width='100%';bL.style.display='flex';bL.style.justifyContent=bL.style.alignItems='center';var _l='';if(c){var _n=80,O=_i-_n,p=(bN.naturalWidth&&bN.naturalHeight)?(bN.naturalWidth/bN.naturalHeight):0,Q=(O>0)?(_h/O):0;p>Q?(bN.style.width='100%',bN.style.height='auto'):(bN.style.width='auto',bN.style.height=`${O}px`);bN.style.maxWidth='100%';bN.style.maxHeight=`${O}px`;bN.style.objectFit='contain';bM.style.maxWidth='100%';bM.style.maxHeight=`${O}px`}else{bN.style.width=bN.style.height='';!isNaN(_h)&&(bN.style.maxWidth=(_h*_)+'px');!isNaN(_i)&&(bN.style.maxHeight=(_i*b)+'px')}bM.style.margin=0;bM.style.position='relative';bM.style.display='inline-block';bM.style.width=bM.style.height='auto';if(B!==1.0){var r=(_i/2)*(B-1.0);bM.style.top=`${r}px`}bP.style.position='absolute';bP.style.top=bP.style.right=0;bP.style.transform=`scale(${_K})`;bP.style.transformOrigin='top right';bO.style.setProperty('--inv-zoom',_K);bO.style.display=window.show_filenames?'':'none';bQ&&(bQ.style.position='absolute',bQ.style.top='50%',bQ.style.left=(20*_K)+'px',bQ.style.transform=`scale(${_K}) translateY(-50%)`,bQ.style.transformOrigin='left center',bQ.style.marginTop=0);_G&&(_G.style.position='absolute',_G.style.top='50%',_G.style.right=(20*_K)+'px',_G.style.transform=`scale(${_K}) translateY(-50%)`,_G.style.transformOrigin='right center',_G.style.marginTop=0)}function aH(){for(var i=0;i<u.length;i++){var bR=u[i];bR._cleanupNav&&bR._cleanupNav();document.body.removeChild(bR)}u=[];v&&(window.removeEventListener('resize',v),v=null)}function aI(e){e.style.visibility='hidden'}function aJ(e){e.style.visibility='visible'}});
